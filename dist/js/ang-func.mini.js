var myApp=angular.module("myApp",["ngRoute","ngAnimate","ngSanitize","angular-google-analytics"]);myApp.constant("logContent","Show content"),myApp.factory("appServices",function($timeout,$location,$window){return{mainLag:function(){var spans=93,lagTime=4800;if("pl"===$window.userLang&&(spans=115,lagTime=5700),$(".content-wrapper__mainText span").length>spans){$(".content-wrapper__mainText span:last").remove(),$("body").css("overflow","hidden");var mainTimer=$timeout(function(){$("body").css("overflow","visible")},lagTime);return console.log("Enter from Main. Timeout ID: "+mainTimer.$$timeoutId),mainTimer}},activeLink:function(){"/"===$location.path()?($(".menu__item--link").first().css("color","#990000"),console.log("Active page: /main")):$(".menu__item--link").each(function(){"#"+$location.path()===$(this).attr("href")?($(this).css("color","#990000"),console.log("Active page: "+$location.path())):$(this).css("color","#1b1b1b")})},validateEmail:function(email){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)},footerPosition:function(){$timeout(function(){var footerPos=0;$(".footer").css("bottom",footerPos+"px"),$(document).height()>$($window).height()&&(footerPos=$($window).height()-$(document).height()-40),$(".footer").css("bottom",footerPos+"px")},600)}}}),myApp.config(["AnalyticsProvider",function(AnalyticsProvider){AnalyticsProvider.setAccount("UA-5968901-19")}]).run(["Analytics",function(Analytics){}]),myApp.config(function($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"partials/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"partials/about.html",controller:"AboutCtrl",resolve:{lag:function(appServices){return appServices.mainLag()}}}).when("/portfolio",{templateUrl:"partials/portfolio.html",controller:"PortfolioCtrl",resolve:{lag:function(appServices){return appServices.mainLag()}}}).when("/contact",{templateUrl:"partials/contact.html",controller:"ContactCtrl",resolve:{lag:function(appServices){return appServices.mainLag()}}}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!0)}),myApp.controller("NavCtrl",function($scope,$location,$window,appServices){$window.dataJSON.done(function(){var data=$window.dataJSON.responseJSON;$.each(data.menu,function(key,val){$(".menu__items").append('<li class="menu__item"><a class="menu__item--link" href="#/'+key+'">'+val+"</a></li>"),$(".menu__item--link").hover(function(){$(this).parent().stop(!0,!1).animate({left:"20px"},500)},function(){$(this).parent().stop(!0,!1).animate({left:"0px"},500,"easeOutBounce")})}),appServices.activeLink(),$scope.$on("$routeChangeStart",function(next,current){appServices.activeLink()})})}),myApp.controller("MainCtrl",function($scope,$location,$timeout,$window,appServices,logContent){$window.dataJSON.done(function(){var data=$window.dataJSON.responseJSON;$(".content-wrapper__mainText").html(data.main.mainText),console.log("Add text to elements"),$(".loading").fadeOut(),$(".content").fadeIn(function(){console.log(logContent),$(".content-wrapper__mainText p:eq(0)").show().textillate({in:{effect:"bounceIn",delay:40},out:{effect:"hinge",delay:70,shuffle:!0,sync:!1,delayScale:7}});var timer1=$timeout(function(){$(".content-wrapper__mainText p:eq(1)").show().textillate({in:{effect:"bounceIn",delay:40},out:{effect:"hinge",delay:40,shuffle:!0,sync:!1,delayScale:2}}),appServices.footerPosition()},500),timer2=$timeout(function(){$(".content-wrapper__mainText p:eq(2)").show().textillate({in:{effect:"bounceIn",delay:40,callback:function(){$(".content-wrapper__mainText p:eq(2)").append("<span></span>")}},out:{effect:"hinge",delay:40,shuffle:!0,sync:!1,delayScale:2}}),appServices.footerPosition()},3100);appServices.footerPosition(),$scope.$on("$routeChangeStart",function(next,current){$timeout.cancel(timer1),$timeout.cancel(timer2),$(".content-wrapper__mainText p").textillate("stop");var spans=93;"pl"===$window.userLang&&(spans=115),$(".content-wrapper__mainText span").length>spans&&$(".content-wrapper__mainText p").textillate("out")})})})}),myApp.controller("AboutCtrl",function($scope,$location,$timeout,$window,appServices,logContent){$window.dataJSON.done(function(){var data=$window.dataJSON.responseJSON;$(".about-intro__text").html(data.about.introText),$(".about-intro__site-header").html(data.about.introSiteHeader),$(".about-intro__site-text").html(data.about.introSiteText),$(".about-intro__certificates-header").html(data.about.introCertificatesHeader),$(".about-intro__certificates-text").html(data.about.introCertificatesText),$(".about-skills__header-coding").html(data.about.headerCoding),$(".about-skills__header-frameworks").html(data.about.headerFrameworks),$(".about-skills__header-technologies").html(data.about.headerTechnologies),$(".about-skills__header-cms").html(data.about.headerCMS),$(".about-skills__header-software").html(data.about.headerSoftware),console.log("Add text to elements")}).then(function(){$(".loading").fadeOut(),$(".content").fadeIn(function(){console.log(logContent),$window.enterView({selector:".about-skills div div",trigger:function(el){$(el).css("width",$(el).find("span").text()),$timeout(function(){$(el).css("color","#1b1b1b")},350),console.log("On screen: "+el)}}),appServices.footerPosition()})})}),myApp.controller("PortfolioCtrl",function($scope,$location,$timeout,$window,appServices,logContent){var img=new $window.Image;img.src="img/spinner-animation.gif",$(img).load(function(){$window.dataJSON.done(function(){var data=$window.dataJSON.responseJSON;$(".portfolio__online-header").html(data.portfolio.online.header);for(let i=0;i<data.portfolio.online.works.length;i++)$(".portfolio__online-items").append('<div class="portfolio-item"><img class="portfolio-item__img" data-src="'+data.portfolio.online.works[i].img+'" src="img/spinner-animation.gif" alt="Portfolio img"><div class="portfolio-item__wrapper"><div class="portfolio-item__header">'+data.portfolio.online.works[i].title+'</div><a class="portfolio-item__url" href="http://'+data.portfolio.online.works[i].url+'">'+data.portfolio.online.works[i].url+'</a><div class="portfolio-item__description">'+data.portfolio.online.works[i].description+'</div></div><div class="portfolio-item__vline-left"></div><div class="portfolio-item__hline-left"></div><div class="portfolio-item__vline-right"></div><div class="portfolio-item__hline-right"></div></div>');$(".portfolio__offline-header").html(data.portfolio.offline.header);for(let i=0;i<data.portfolio.offline.works.length;i++)$(".portfolio__offline-items").append('<div class="portfolio-item"><img class="portfolio-item__img" data-src="'+data.portfolio.offline.works[i].img+'" src="img/spinner-animation.gif" alt="Portfolio img"><div class="portfolio-item__wrapper"><div class="portfolio-item__header">'+data.portfolio.offline.works[i].title+'</div><div class="portfolio-item__description">'+data.portfolio.offline.works[i].description+'</div></div><div class="portfolio-item__vline-left"></div><div class="portfolio-item__hline-left"></div><div class="portfolio-item__vline-right"></div><div class="portfolio-item__hline-right"></div></div>')}).then(function(){$(".loading").fadeOut(),$(".content").fadeIn(function(){console.log(logContent),$window.enterView({selector:".portfolio-item",trigger:function(el){$(el).css("opacity","1"),$(el).find("img").attr("src",$(el).find("img").attr("data-src")),console.log("On screen: "+el)}}),appServices.footerPosition()})})})}),myApp.controller("ContactCtrl",function($scope,$location,$window,appServices,logContent){$window.dataJSON.done(function(){function formSender(){var errors=0,$subject=$(".form__subject");$subject.val()||$subject.val($subject.attr("placeholder")),$(".form__row").each(function(){$(this).children().first().val().length<3?(errors++,$(this).children().first().css("border-color","#990000"),$(this).find("label span").remove(),$(this).find("label").append("<span> ("+data.contact.minimumError+")</span>")):($(this).children().first().css("border-color","#dfdfe4"),$(this).find("label span").remove())}),appServices.validateEmail($(".form__email").val())?($(".form__email  + label span").remove(),$(".form__email").css("border-color","#dfdfe4")):(errors++,console.log("Check email"),$(".form__email  + label span").remove(),$(".form__email").css("border-color","#990000"),$(".form__email  + label").append("<span> ("+data.contact.emailError+")</span>")),console.log("Errors: "+errors),0===errors&&$window.grecaptcha.execute()}var data=$window.dataJSON.responseJSON;$(".contact__details").html(data.contact.description),$(".form__name + label").html(data.contact.name),$(".form__email  + label").html(data.contact.email),$(".form__subject  + label").html(data.contact.subject),$(".form__subject").attr("placeholder",data.contact.defaultSubject),$(".form__message  + label").html(data.contact.message),$(".form__submit").html(data.contact.submit),window.sendData=function(){var url=$("form").attr("action"),formData={name:$(".form__name").val(),email:$(".form__email").val(),subject:$(".form__subject").val(),massage:$(".form__message").val()};$.post(url,{description:formData.description,name:formData.name,email:formData.email,subject:formData.subject,massage:formData.massage,sendOk:data.sendOk,sendError:data.sendError}).done(function(answer){$(".form__submit").text(answer)})},$(".form__submit").click(function(){formSender()}),$(".form").keyup(function(event){13===event.keyCode&&formSender()})}).then(function(){$(".loading").fadeOut(),$(".content").fadeIn(function(){console.log(logContent),appServices.footerPosition(),$.getScript("https://www.google.com/recaptcha/api.js")})})});